{% extends 'page.html.twig' %}


{% set  header_image = media.images[header.feature_image].url %}
    
{% set collection = page.collection() %}

{% block page_content %}
<div id="project-list" class="container">
    {% for row in collection|batch(4) %}
    <div class="row no-gutters">
        {% for child in row %}
            {# DETERMINE IMAGE #}
            {% set project_image = child.header.project_image|defined(true) %}
            {% set project_image_width  = child.header.project_image_width|defined(200) %}
            {% set project_image_height = child.header.project_image_height|defined(200) %}
            {% set project_image_file = child.header.project_image_file %}
            {% if project_image %}
                {% if project_image_file %}
                    {% set project_image_media = child.media.images[project_image_file].url %}
                {% else %}
                    {% set project_image_media = child.media.images|first.url %}
                {% endif %}
                {% if not project_image_media %}
                    {% set project_image_media = theme_url ~ "/dist/images/logo_sketch.jpg" %}
                {% endif %}
            {% endif %}

            <div class="project-list-item">
                <div class="col-xs-6 col-md-3 project-list-item">
                    <a href="{{ child.url }}"><h3 class="project-name">{{ child.title }}</h3></a>
                    {% if project_image_media %}
                        <img src="{{ project_image_media }}" class="">
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>{# row #}
    {% endfor %}

    {% if config.plugins.pagination.enabled and collection.params.pagination %}
        <div class="pagination-wrapper">
            {% include 'partials/pagination.html.twig' with {'base_url':page.url, 'pagination':collection.params.pagination} %}
        </div>
    {% endif %}
</div>

{% endblock page_content %}