<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8" />
    <title>Entity-Component-System | Jean-William Perreault</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="GravCMS" />
<meta name="description" content="Portfolio site of Jean-William Perreault" />

    <link rel="apple-touch-icon" sizes="180x180" href="theme://dist/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/jwillp/user/themes/jwillp/dist/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/jwillp/user/themes/jwillp/dist/images/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/jwillp/user/themes/jwillp/dist/images/manifest.json">
    <link rel="mask-icon" href="/jwillp/user/themes/jwillp/dist/images/safari-pinned-tab.svg" color="#000000">
    <link rel="shortcut icon" href="/jwillp/user/themes/jwillp/dist/images/favicon.ico">
    <meta name="msapplication-config" content="/jwillp/user/themes/jwillp/dist/images/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="canonical" href="http://localhost/jwillp/blog/entity-component-system" />

                                    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" />
<link href="https://cdn.rawgit.com/michalsnik/aos/2.1.1/dist/aos.css" type="text/css" rel="stylesheet" />
<link href="/jwillp/user/themes/jwillp/dist/css/style.css" type="text/css" rel="stylesheet" />
<link href="/jwillp/user/plugins/markdown-notices/assets/notices.css" type="text/css" rel="stylesheet" />
<link href="/jwillp/user/plugins/form/assets/form-styles.css" type="text/css" rel="stylesheet" />
<link href="/jwillp/user/plugins/highlight/css/monokai.css" type="text/css" rel="stylesheet" />
<link href="/jwillp/user/plugins/login/css/login.css" type="text/css" rel="stylesheet" />


                                    <script src="/jwillp/system/assets/jquery/jquery-2.x.min.js" type="text/javascript" ></script>
<script src="https://cdn.rawgit.com/michalsnik/aos/2.1.1/dist/aos.js" type="text/javascript" ></script>
<script src="/jwillp/user/plugins/highlight/js/highlight.pack.js" type="text/javascript" ></script>
<script src="/jwillp/user/themes/jwillp/dist/js/app.min.js" type="text/javascript" ></script>

<script>
$(document).ready(function() {
                    $('pre code').each(function(i, block) {
                        hljs.highlightBlock(block);
                    });
                 });

</script>


</head>
<body id="top" class="">
    <nav id="header" class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/jwillp">
              <img class="hidden-xs" id="logo" src="/jwillp/user/themes/jwillp/dist/images/logo.png" alt="Jean-William Perreault" >

              <img class="visible-xs" id="logo" src="/jwillp/user/themes/jwillp/dist/images/logo.png" alt="Jean-William Perreault" width="200" >
          </a>
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            


 
             
            <li class=""><a href="/jwillp">Home</a></li> 
         
 
             
            <li class=""><a href="/jwillp/about">About</a></li> 
         
 
             
            <li class=""><a href="/jwillp/projects">Projects</a></li> 
         
 
             
            <li class="active"><a href="/jwillp/blog">Blog</a></li> 
         
 
             
            <li class=""><a href="/jwillp/contact">Contact</a></li> 
         
 

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

  
    <div class="halfscreen-hero" style="background-image: url(/jwillp/images/4/a/f/5/9/4af59d1b21d017760523ae71e37262cc72d3b596-diamond.png)">
        <div class="hero-content">
            <h1>Entity-Component-System</h1>

            <h3></h3>
        </div>
    </div>
    <div id="page-wrapper" >
            <div id="page-wrapper"  class="container">
        <div class="blog-post">
            <p>When developing a game one of the very first architectural decisions developers have to make is to decide
how game objects/entities will be defined. One the ways this can be implemented is by going the classic OOP way.
However, there are some major drawbacks to this route and better solutions exist, such as the Entity Component System. In this article we will discuss how an Entity-Component-System can be used to overcome the pitfalls of OOP for game entities.</p>
<hr />
<p>For my final Year project of my DCS in computer science, I decided to implement a game using the Entity Component System architectural pattern. In the past, I had encountered some problems using OOP in a classic way to define the entities of my game, Entity-Component-System seemed the way to go, and in my experience, it was.</p>
<p>Now, before getting into the specifics of what is an Entity-Component-System and how it can be better than OOP, we'll do this:
Lets pretend we are making a game. A Super Mario Bros. on steroids. A kind of Super Mario Bros. where some of the goombas (the little brown mushrooms) can spit fire and others teleport themselves.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/en/c/ce/Goomba.PNG" alt="" />
<em>This is a goomba</em></p>
<p>If we'd go the traditional OOP way, the scenario would be something like this one:</p>
<p>First, we would create a class <code>GameObject</code> to represent all objects of our game. From Mario, to the mushrooms
to the pipes, etc.
Then, we would create a class <code>Goomba</code> inheriting <code>GameObject</code>.
Next, we would define two more classes inheriting <code>Goomba</code>: a <code>FireSpitterGoomba</code> class and a <code>TeleportingGoomba</code> class.
Both classes would have the necessary code to respectively make the mushrooms spit fire and teleport themselves.</p>
<p>So far, so good. Now lets say we'd want to create a third type of mushrooms. One very special kind of mushroom.
A deadly fire spitting mushroom that is also able to teleport itself. The <code>TeleportingFireSpitterGoomba</code></p>
<p>How would we do this.</p>
<p>If we'd use a language that support multiple inheritance such as C++, we could get away with it.
But what about languages that don't like Java. We would have two choices there:</p>
<ul>
<li>Inherit from <code>FireSpitterGoomba</code>and duplicate the teleporting code from <code>TeleportingGoomba</code></li>
<li>Inherit from <code>TeleportingGoomba</code>and duplicate the fire spitting code from <code>FireSpitterGoomba</code></li>
</ul>
<p>However, in both cases we are doing something bad, we are duplicating code. And this does not scale well at all.</p>
<p>Now what about a programming language that supports multiple inheritance like C++. In this case we'd have a similar problem, but instead it would happen in method overriding. If a <code>Goomba</code> method differs in <code>TeleportingGoomba</code> and <code>FireSpitterGoobma</code>, like <code>Goomba.walk()</code> we'd have a problem: which version of the method should <code>TeleportingFireSpitterGoomba</code> use ?</p>
<p><img alt="" src="/jwillp/user/pages/04.blog/entity-component-system/diamond_mario.png" />
<em>Class hierarchy</em></p>
<p>This problem is commonly known as the deadly diamond of death. Which could be defined in simple terms as occurring when we have a diamond shaped inheritance diagram.
Such as a:</p>
<ul>
<li>A class <code>A</code> being parent to both classes <code>B</code> and <code>C</code>, </li>
<li>And having a class <code>D</code> inheriting from both <code>B</code> and  <code>C</code>.</li>
</ul>
<p><img alt="" src="/jwillp/user/pages/04.blog/entity-component-system/diamond.png" />
<em>Deaddly diamond of death</em></p>
<p>This would get even worse if we'd decide to have a <code>TeleportingFireSpitterMario</code>, imagine this.</p>
<p>Instead, we could do this:</p>
<ul>
<li>Have a class named <code>SuperPower</code>.</li>
<li>Have a <code>FireSpittingPower</code> inheriting <code>SuperPower</code>.</li>
<li>Have a <code>TeleportingPower</code> also inheriting <code>SuperPower</code>.</li>
</ul>
<p>Now, our Goombas would only have to store a list of super powers available to them for use.
This way we wouldn't even need to have specialised classes for our different types of Goombas!
We'd simply take a plain Goomba and give it super powers. Not only have we overcome the deadly diamond of death, but we've just given ourselves more flexibility by allowing us to reuse powers.
We could even give our Mario character teleporting abilities.</p>
<p>We could even get further: We could even get rid of our classes Mario and Goomba and instead define all the characteristics that differentiate our characters in a simple list of attributes..
We could have something like this:</p>
<pre><code class="language-java">class GameObject {
    private ArrayList&lt;Attribute&gt; attributes;
    // getter &amp; setter ...
}

class Attribute {}

class SuperPower extends Attribute {}

class FireSpitting extends SuperPower {}

class Teleporting extends SuperPower {}
</code></pre>
<p>Then, define our objects this way:</p>
<pre><code class="language-java">GameObject teleportingGoomba = new GameObject();
teleportingGoomba.addAttribute(new TeleportingGoomba())

GameObject mario = new GameObject();
mario.addAttribute(new FireSpittingPower());</code></pre>
<p>This is a win win situation. We get rid of the diamond problem and we gain reusability.</p>
<p>And if we'd ever need to create a new type of power like flying or a flying mushroom ? It would get as simple as creating a <code>FlyingPower</code> class from which even Mario could benefit.</p>
<p><img alt="" src="/jwillp/user/pages/04.blog/entity-component-system/flying_goomba.png" />
<em>Flying Goomba!</em></p>
<p>As we saw, heavy inheritance is not always the best solution.
It can get complicated and out of hand very quickly. Instead of relying on it to define everything
in our game, we used it to define parts of our game data.</p>
<p>And what we just did here, is getting closer to the idea of Entity-Component-System.</p>
<p>The Entity-Component-System is a software architecture pattern that follows the principle of <em>composition over inheritance</em>. For the rest of this article, I will simply refer to it as ECS.</p>
<p>ECS operates with three basic elements, each of which has a specific role: </p>
<ul>
<li>Entities </li>
<li>Components </li>
<li>Systems</li>
</ul>
<h2>Entities</h2>
<p>An entity is in fact a concept. It is supposed to represent a precise object. If we take our previous game example, the bricks, the Goombas, Mario, Luigi, the pipes, the fire balls would all be entities. It is the equivalent of the instance of an object. It will serve as a container of components. It is the element that will give meaning to a specific set of components.</p>
<h2>Components</h2>
<p>The components are one of the main elements of the architectural pattern. A component corresponds to the data describing the object. Often, if one wants to be purist in its implementation, they are implemented as <em>behaviourless</em> structs. A few examples of game components could be this:</p>
<pre><code class="language-cpp">struct HealthComponent {
    int amount = 100;
}

struct SpeedComponent {
    float speed = 100.0f;
}

struct SpriteComponent {
    string imageFilePath;
}
</code></pre>
<h2>Systems</h2>
<p>A system is a specialized unit of logic operating on components only. It does not really care about what kind of entity it is dealing with. It only cares about its specific subset of components. For example the PhysicsSystem, only operates on entities having a PhysicsComponent, it does not care whether or not the entity has a graphical representation as that does not concern its main task: calculating physics and collisions.</p>
<p>We divide our logic in a very clear and easy way to scale. If one wants to change the way in which our entities lose or gain health, we simply have to change a single portion of our code: the HealthSystem. It saves us a lot of bugs and therefore debugging time. Also one can benefit from optimizing the memory of our program by using contiguous memory.</p>
<h2>Conclusion</h2>
<p>In short, the ECS is an alternative to classic OOP to define our data classes and behaviours in a software. It has the advantage of getting us rid of the diamond problem while giving us reusability and flexibility, which are two mandatory elements in game development.</p>
        </div>
    </div>
    </div>

<a href="#top" class="scroll-icon scroll-up-icon">
    <i class="fa fa-angle-up" aria-hidden="true"></i>
</a>

  <div id="footer">
    <div class="footer-logo">
      <img src="/jwillp/user/themes/jwillp/dist/images/footer_logo.png" alt="Jean-William Perreault">
    </div>
    <div class="footer-social-links">    </div>
    <div class="footer-copyright-notice">
      &copy; 2017 Jean-William Perreault All Right Reserved - Web developpement by Jean-William Perreault</p>
    </div>
  </div>


    
</body>
</html>
